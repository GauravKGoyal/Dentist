@using Dentist.Helpers
@using Dentist.ViewModels
@model Dentist.ViewModels.PatientViewModel

<script src="~/Scripts/gridHelper.js"></script>
@{
    var pageSizeArray = new[] { 20, 50, 100 };
}

@(Html.Kendo().Grid<VitalSignViewModel>().Name("grdVitalSign")
          .DataSource(dataSource => dataSource
            .Ajax()
            .Model(model =>
            {
                model.Id(x => x.Id);
                model.Field(x => x.PatientId).DefaultValue(Model.Id);
                model.Field(x => x.RecordedDate).DefaultValue(DateTime.Now);
            })
              .PageSize(pageSizeArray[0])
              .Sort(sort =>
              {
                  sort.Add(x => x.PatientId).Descending();
              }).Events(e =>
              {
                  e.Error("grid_OnError");

              })
            .Read(read => read.Action("GetVitalSignBrowserItems", "VitalSign", new { patientId = Model.Id }))
            .Create(create => create.Action("Create", "VitalSign"))
            .Update(update => update.Action("Update", "VitalSign"))
            .Destroy(destroy => destroy.Action("Delete", "VitalSign"))
          )
          .Columns(columns =>
          {
              columns.Bound(x => x.Id);
              columns.Bound(x => x.Pulse);
              columns.Bound(x => x.Temperature);
              columns.Bound(x => x.SystolicBloodPressure);
              columns.Bound(x => x.DiastolicBloodPressure);
              columns.Bound(x => x.Weight);
              columns.Bound(x => x.ResperatoryRate);
              columns.Command(command =>
              {
                  command.Destroy();
                  command.Edit();
              }).Width("12%");
          })
          .ToolBar(toolbar => toolbar.Create())
          .Editable(editable => editable.Mode(GridEditMode.PopUp)
          )
          .Resizable(resizable => resizable.Columns(true))
          .Pageable(pager =>
          {
              pager.PageSizes(pageSizeArray);
          })
          .Navigatable()
          .Sortable()
          .Scrollable(s => s.Height("auto"))
          .AutoBind(false)
)

